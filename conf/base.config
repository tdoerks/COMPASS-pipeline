/*
 * -------------------------------------------------
 *  Base Nextflow config file
 * -------------------------------------------------
 * This config file defines default resource requirements
 * and container settings used across all profiles.
 */

process {
    // Default resource requirements
    cpus = 1
    memory = '2.GB'
    time = '1h'

    // Process-specific resource requirements
    withName: 'AMRFINDER' {
        cpus = 4
        memory = '8.GB'
        time = '1h'
    }

    withName: 'VIBRANT' {
        cpus = 8
        memory = '16.GB'
        time = '12h'
    }

    withName: 'DIAMOND_PROPHAGE' {
        cpus = 4
        memory = '8.GB'
        time = '1h'
    }

    withName: 'CHECKV' {
        cpus = 2
        memory = '8.GB'
        time = '2h'
    }

    withName: 'PHANOTATE' {
        cpus = 2
        memory = '4.GB'
        time = '2h'
    }

    withName: 'DOWNLOAD_NARMS_METADATA' {
        cpus = 1
        memory = '2.GB'
    }

    withName: 'FILTER_NARMS_SAMPLES' {
        cpus = 1
        memory = '4.GB'
    }

    withName: 'DOWNLOAD_SRA' {
        cpus = 4
        memory = '8.GB'
        time = '2h'
    }

    withName: 'FASTQC' {
        cpus = 2
        memory = '2.GB'
        time = '30m'
    }

    withName: 'FASTP' {
        cpus = 4
        memory = '4.GB'
        time = '1h'
    }

    withName: 'ASSEMBLE_SPADES' {
        cpus = 8
        memory = '32.GB'
        time = '12h'
    }

    withName: 'BUSCO' {
        cpus = 4
        memory = '8.GB'
        time = '2h'
    }

    withName: 'DOWNLOAD_BUSCO_LINEAGE' {
        cpus = 1
        memory = '4.GB'
        time = '1h'
    }

    withName: 'MLST' {
        cpus = 2
        memory = '2.GB'
        time = '30m'
    }

    withName: 'MOBSUITE_RECON' {
        cpus = 4
        memory = '8.GB'
        time = '1h'
    }

    withName: 'SISTR' {
        cpus = 2
        memory = '4.GB'
        time = '30m'
    }

    withName: 'MULTIQC' {
        cpus = 1
        memory = '4.GB'
        time = '30m'
    }

    withName: 'ABRICATE' {
        cpus = 1
        memory = '2.GB'
        time = '15m'
    }

    withName: 'ABRICATE_SUMMARY' {
        cpus = 1
        memory = '2.GB'
        time = '15m'
    }
}

// Apptainer/Singularity configuration (used by most HPC environments)
apptainer {
    enabled = true
    autoMounts = true
    cacheDir = "$HOME/.apptainer/cache"
}
