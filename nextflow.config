// Load base configuration
includeConfig 'conf/base.config'

params {
    input = "samplesheet.csv"
    outdir = "results"

    // Metadata filtering parameters
    filter_state = "KS"           // State code (e.g., "KS", "CA", "TX")
    filter_year_start = null      // Minimum year (e.g., 2020)
    filter_year_end = null        // Maximum year (e.g., 2023)
    filter_source = null          // Source pattern (e.g., "chicken", "clinical")

    // Database parameters
    // Leave empty for automatic download where available
    amrfinder_db = ""
    prophage_db = ""  // Leave empty to auto-download from Dryad, or provide path to .dmnd file
    checkv_db = "/homes/tylerdoe/databases/checkv-db-v1.5"  // Required: manual download needed

    // Config profile (set via -profile option)
    config_profile_name = null
    config_profile_description = null
}

// HPC-specific configuration profiles
profiles {
    beocat {
        includeConfig 'conf/beocat.config'
    }
    ceres {
        includeConfig 'conf/ceres.config'
    }
    atlas {
        includeConfig 'conf/atlas.config'
    }
    standard {
        process.executor = 'local'
    }
}

// Default Apptainer/Singularity configuration
// Can be overridden by profile-specific configs
apptainer {
    enabled = true
    autoMounts = true
    cacheDir = "$HOME/.apptainer/cache"
}

singularity {
    enabled = true
    autoMounts = true
    cacheDir = "$HOME/.singularity/cache"
}
